

## ×ª×›×•× ×” ×—×“×©×”: ×¢××•×“ × ×™×”×•×œ ×§×‘×•×¦×•×ª (Admin Only)

### ×¡×§×™×¨×” ×›×œ×œ×™×ª

×¢××•×“ ×—×“×© ×©×™×”×™×” × ×’×™×© ×¨×§ ×œ×š (zivkad12@gmail.com) ×‘×• ×ª×•×›×œ ×œ×¢×“×›×Ÿ ××ª ××¡×¤×¨ ×”×›×•×›×‘×™× ×©×œ ×›×œ ×”×§×‘×•×¦×•×ª ×•×”× ×‘×—×¨×•×ª. ×”×¢××•×“ ×™×¦×™×’ ××ª ×”×§×‘×•×¦×•×ª ××¡×•×“×¨×•×ª ×œ×¤×™ ×œ×™×’×•×ª.

---

### ×¨×›×™×‘×™× ×©×™×™×•×•×¦×¨×•

#### 1. ×¢××•×“ Admin ×—×“×©: `src/pages/AdminClubs.tsx`

| ×¤×™×¦'×¨ | ×ª×™××•×¨ |
|-------|--------|
| ×‘×“×™×§×ª ×”×¨×©××•×ª | ×¨×§ ×”××©×ª××© zivkad12@gmail.com ×™×•×›×œ ×œ×’×©×ª |
| ×ª×¦×•×’×” ×œ×¤×™ ×œ×™×’×•×ª | ×”×§×‘×•×¦×•×ª ××§×•×‘×¦×•×ª ×œ×¤×™ Premier League, La Liga, Bundesliga, Serie A, Ligue 1, International ×•×›×•' |
| ×¢×¨×™×›×ª ×›×•×›×‘×™× | ×œ×›×œ ×§×‘×•×¦×” ×©×“×” ×œ×¢×¨×™×›×ª ××¡×¤×¨ ×”×›×•×›×‘×™× (1-5, ×›×•×œ×œ 0.5) |
| ×©××™×¨×” | ×›×¤×ª×•×¨ ×©××™×¨×” ×œ×›×œ ×œ×™×’×” ××• ×©××™×¨×” ×›×œ×œ×™×ª |

#### 2. ×˜×‘×œ×ª ×“××˜××‘×™×™×¡ ×—×“×©×”: `club_overrides`

```sql
CREATE TABLE public.club_overrides (
  club_id TEXT PRIMARY KEY,
  stars NUMERIC(2,1) NOT NULL,
  updated_at TIMESTAMPTZ DEFAULT now(),
  updated_by UUID REFERENCES auth.users(id)
);
```

×”×˜×‘×œ×” ×ª×©××•×¨ ×¨×§ ×§×‘×•×¦×•×ª ×©×©×™× ×™×ª ×œ×”×Ÿ ××ª ×”×›×•×›×‘×™×. ×”×§×•×“ ×™×©×œ×•×£ ××”×˜×‘×œ×” ×”×–×• ×•×™×¢×“×›×Ÿ ××ª ×”× ×ª×•× ×™× ××§×•×‘×¥ `clubs.ts`.

#### 3. ×¢×“×›×•×Ÿ `src/data/clubs.ts`

×¤×•× ×§×¦×™×” ×—×“×©×” ×©×ª××–×’ ××ª ×”× ×ª×•× ×™× ×”×¡×˜×˜×™×™× ×¢× ×”×¢×“×›×•× ×™× ××”×“××˜××‘×™×™×¡:

```typescript
// ×¤×•× ×§×¦×™×” ×—×“×©×”
export async function getClubsWithOverrides(): Promise<Club[]> {
  const overrides = await loadOverridesFromDB();
  return FIFA_CLUBS.map(club => ({
    ...club,
    stars: overrides[club.id] ?? club.stars
  }));
}
```

---

### ××‘× ×” ×”×¢××•×“

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† ×—×–×¨×”     × ×™×”×•×œ ×§×‘×•×¦×•×ª (Admin)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿ Premier League              â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ Manchester City       [â˜…â˜…â˜…â˜…â˜… â–¼]    â”‚ â”‚
â”‚ â”‚ Liverpool             [â˜…â˜…â˜…â˜…â˜… â–¼]    â”‚ â”‚
â”‚ â”‚ Arsenal               [â˜…â˜…â˜…â˜…â˜… â–¼]    â”‚ â”‚
â”‚ â”‚ Chelsea               [â˜…â˜…â˜…â˜…â˜† â–¼]    â”‚ â”‚
â”‚ â”‚ ...                                 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ‡ªğŸ‡¸ La Liga                         â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ Real Madrid           [â˜…â˜…â˜…â˜…â˜… â–¼]    â”‚ â”‚
â”‚ â”‚ FC Barcelona          [â˜…â˜…â˜…â˜…â˜… â–¼]    â”‚ â”‚
â”‚ â”‚ ...                                 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸŒ International (× ×‘×—×¨×•×ª)           â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ France                [â˜…â˜…â˜…â˜…â˜… â–¼]    â”‚ â”‚
â”‚ â”‚ England               [â˜…â˜…â˜…â˜…â˜… â–¼]    â”‚ â”‚
â”‚ â”‚ ...                                 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚        [ğŸ’¾ ×©××•×¨ ×©×™× ×•×™×™×]                â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ××‘×˜×—×”

#### ×‘×“×™×§×ª Admin ×‘×¦×“ ×”×œ×§×•×—:

```typescript
const ADMIN_EMAIL = 'zivkad12@gmail.com';

const { data: { user } } = await supabase.auth.getUser();
if (user?.email !== ADMIN_EMAIL) {
  navigate('/'); // ×”×¤× ×™×” ×œ×“×£ ×”×‘×™×ª
}
```

#### RLS Policy ×‘×“××˜××‘×™×™×¡:

```sql
-- ×›×œ ××©×ª××© ×××•××ª ×™×›×•×œ ×œ×§×¨×•× (×›×“×™ ×©×”×§×‘×•×¦×•×ª ×™×ª×¢×“×›× ×• ×œ×›×•×œ×)
CREATE POLICY "club_overrides: authenticated can read" 
ON public.club_overrides FOR SELECT 
USING (auth.uid() IS NOT NULL);

-- ×¨×§ Admin ×™×›×•×œ ×œ×›×ª×•×‘ (×‘×“×™×§×” ×œ×¤×™ email)
CREATE POLICY "club_overrides: admin can write" 
ON public.club_overrides FOR ALL
USING (
  EXISTS (
    SELECT 1 FROM auth.users 
    WHERE id = auth.uid() 
    AND email = 'zivkad12@gmail.com'
  )
);
```

---

### ×§×‘×¦×™× ×©×™×©×ª× ×•/×™×™×•×•×¦×¨×•

| ×§×•×‘×¥ | ×¤×¢×•×œ×” |
|------|-------|
| `src/pages/AdminClubs.tsx` | ×—×“×© - ×¢××•×“ ×”× ×™×”×•×œ |
| `src/App.tsx` | ×”×•×¡×¤×ª route `/admin/clubs` |
| `src/data/clubs.ts` | ×¤×•× ×§×¦×™×•×ª ×—×“×©×•×ª ×œ×˜×¢×™× ×ª overrides |
| `src/services/remoteStorageService.ts` | ×¤×•× ×§×¦×™×•×ª ×œ×©××™×¨×”/×˜×¢×™× ×” ×©×œ overrides |
| `supabase/migrations/` | ×™×¦×™×¨×ª ×˜×‘×œ×ª `club_overrides` |
| `src/pages/Index.tsx` | ×§×™×©×•×¨ ×œ×¢××•×“ Admin (×¨×§ ×¢×‘×•×¨×š) |

---

### ×–×¨×™××ª × ×ª×•× ×™×

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  clubs.ts        â”‚
                    â”‚  (× ×ª×•× ×™× ×‘×¡×™×¡×™×™×) â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  club_overrides  â”‚â”€â”€â–¶â”‚  ××™×–×•×’ × ×ª×•× ×™×   â”‚
â”‚  (×©×™× ×•×™×™× ×©×œ×š)   â”‚   â”‚  getClubsWithOverrides()
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  TeamSelector    â”‚
                    â”‚  (×©×™××•×© ×‘×˜×•×¨× ×™×¨) â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ×¡×™×›×•× ×”×©×™× ×•×™×™×

1. **Migration** - ×˜×‘×œ×ª `club_overrides` ×¢× RLS
2. **×¢××•×“ Admin** - ×ª×¦×•×’×” ×œ×¤×™ ×œ×™×’×•×ª ×¢× ×¢×¨×™×›×ª ×›×•×›×‘×™×
3. **Route ×—×“×©** - `/admin/clubs`
4. **×œ×•×’×™×§×”** - ××™×–×•×’ overrides ×¢× × ×ª×•× ×™× ×‘×¡×™×¡×™×™×
5. **×›×¤×ª×•×¨ ×’×™×©×”** - ×¨×§ ×¢×‘×•×¨×š ×‘×¢××•×“ ×”×‘×™×ª

